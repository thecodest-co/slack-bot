CREATE TABLE slack_bot.events
(
    id   BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    type VARCHAR(255) NOT NULL UNIQUE
);

INSERT INTO slack_bot.events(type)
VALUES ('APP_HOME_OPENED'),
       ('APP_MENTION'),
       ('APP_RATE_LIMITED'),
       ('APP_REQUESTED'),
       ('APP_UNINSTALLED'),
       ('CALL_REJECTED'),
       ('CHANNEL_ARCHIVE'),
       ('CHANNEL_CREATED'),
       ('CHANNEL_DELETED'),
       ('CHANNEL_HISTORY_CHANGED'),
       ('CHANNEL_ID_CHANGED'),
       ('CHANNEL_LEFT'),
       ('CHANNEL_RENAME'),
       ('CHANNEL_SHARED'),
       ('CHANNEL_UNARCHIVE'),
       ('CHANNEL_UNSHARED'),
       ('DND_UPDATED'),
       ('DND_UPDATED_USER'),
       ('EMAIL_DOMAIN_CHANGED'),
       ('EMOJI_CHANGED'),
       ('FILE_CHANGE'),
       ('FILE_COMMENT_ADDED'),
       ('FILE_COMMENT_DELETED'),
       ('FILE_COMMENT_EDITED'),
       ('FILE_CREATED'),
       ('FILE_DELETED'),
       ('FILE_PUBLIC'),
       ('FILE_SHARED'),
       ('FILE_UNSHARED'),
       ('GRID_MIGRATION_FINISHED'),
       ('GRID_MIGRATION_STARTED'),
       ('GROUP_ARCHIVE'),
       ('GROUP_CLOSE'),
       ('GROUP_DELETED'),
       ('GROUP_HISTORY_CHANGED'),
       ('GROUP_LEFT'),
       ('GROUP_OPEN'),
       ('GROUP_RENAME'),
       ('GROUP_UNARCHIVE'),
       ('IM_CLOSE'),
       ('IM_CREATED'),
       ('IM_HISTORY_CHANGED'),
       ('IM_OPEN'),
       ('INVITE_REQUESTED'),
       ('LINK_SHARED'),
       ('MEMBER_JOINED_CHANNEL'),
       ('MEMBER_LEFT_CHANNEL'),
       ('MESSAGE'),
       ('MESSAGE_APP_HOME'),
       ('MESSAGE_CHANNELS'),
       ('MESSAGE_GROUPS'),
       ('MESSAGE_IM'),
       ('MESSAGE_MPIM'),
       ('MESSAGE_METADATA_DELETED'),
       ('MESSAGE_METADATA_POSTED'),
       ('MESSAGE_METADATA_UPDATED'),
       ('PIN_ADDED'),
       ('PIN_REMOVED'),
       ('REACTION_ADDED'),
       ('REACTION_REMOVED'),
       ('RESOURCES_ADDED'),
       ('RESOURCES_REMOVED'),
       ('SCOPE_DENIED'),
       ('SCOPE_GRANTED'),
       ('SHARED_CHANNEL_INVITE_ACCEPTED'),
       ('SHARED_CHANNEL_INVITE_APPROVED'),
       ('SHARED_CHANNEL_INVITE_DECLINED'),
       ('SHARED_CHANNEL_INVITE_RECEIVED'),
       ('STAR_ADDED'),
       ('STAR_REMOVED'),
       ('SUBTEAM_CREATED'),
       ('SUBTEAM_MEMBERS_CHANGED'),
       ('SUBTEAM_SELF_ADDED'),
       ('SUBTEAM_SELF_REMOVED'),
       ('SUBTEAM_UPDATED'),
       ('TEAM_ACCESS_GRANTED'),
       ('TEAM_ACCESS_REVOKED'),
       ('TEAM_DOMAIN_CHANGE'),
       ('TEAM_JOIN'),
       ('TEAM_RENAME'),
       ('TOKENS_REVOKED'),
       ('URL_VERIFICATION'),
       ('USER_CHANGE'),
       ('USER_HUDDLE_CHANGED'),
       ('USER_PROFILE_CHANGED'),
       ('USER_RESOURCE_DENIED'),
       ('USER_RESOURCE_GRANTED'),
       ('USER_RESOURCE_REMOVED'),
       ('USER_STATUS_CHANGED'),
       ('WORKFLOW_DELETED'),
       ('WORKFLOW_PUBLISHED'),
       ('WORKFLOW_STEP_DELETED'),
       ('WORKFLOW_STEP_EXECUTE'),
       ('WORKFLOW_UNPUBLISHED');

CREATE TABLE slack_bot.applications_events
(
    application_id BIGINT REFERENCES slack_bot.applications (id) ON UPDATE CASCADE ON DELETE CASCADE,
    event_id       BIGINT REFERENCES slack_bot.events (id) ON UPDATE CASCADE,
    CONSTRAINT applications_events_pkey PRIMARY KEY (application_id, event_id)
);
